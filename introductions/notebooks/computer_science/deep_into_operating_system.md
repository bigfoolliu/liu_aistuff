# 深入理解计算机系统笔记


<!-- vim-markdown-toc Marked -->

* [1.计算机系统漫游](#1.计算机系统漫游)
        * [1.1基础](#1.1基础)
        * [1.2进程](#1.2进程)
        * [1.3虚拟内存](#1.3虚拟内存)
        * [1.4程序的机器级表示](#1.4程序的机器级表示)
        * [1.5处理器体系结构](#1.5处理器体系结构)
        * [1.6优化程序性能](#1.6优化程序性能)
        * [1.7存储器层次结构](#1.7存储器层次结构)
* [2.在系统中运行程序](#2.在系统中运行程序)
        * [2.1链接](#2.1链接)
        * [2.2异常控制流](#2.2异常控制流)

<!-- vim-markdown-toc -->

## 1.计算机系统漫游

### 1.1基础

存储器层次结构:

寄存器-->L1缓存-->L2缓存-->L3缓存-->主存(DRAM)-->本地存储-->远程二级存储(分布式存储，web服务等)

操作系统作用：

1. 防止硬件被应用程序滥用；
2. 给应用程序提供简单机制来控制硬件

通过`进程(处理器，主存，IO设备的抽象表示)`，`虚拟内存(主存，磁盘IO的抽象表示)`，`文件(IO设备的抽象表示)`来实现。

### 1.2进程

- 进程是操作系统对正在运行的程序的抽象
- `并发运行`指的是多个程序的指令交错执行,CPU实现的机制是`上下文(pc和寄存器的当前值，主存的内容等)切换`

### 1.3虚拟内存

- 让每一个进程都好像在独占主存

1. 程序代码和数据
2. 堆

4. 栈,函数调用
5. 内核虚拟内存

### 1.4程序的机器级表示

- 反汇编程序

### 1.5处理器体系结构

### 1.6优化程序性能

- 需要选择一组合适的算法和数据结构
- 编译器能够有效转化和优化的源码

### 1.7存储器层次结构

L0-->L6, 存储设备越来越慢，容量越来愈大。

`缓存命中`：从第k层需要某个对象d时候，首先从第k层查找，d刚好在第k层。

## 2.在系统中运行程序


### 2.1链接

`链接器`将各种代码和数据片段收集组合为一个文件加载到内存，而不必写出一个巨大的源文件(分离编译)。

### 2.2异常控制流

异常类别：

- 中断，异步
- 陷阱，同步，有意的异常
- 故障，同步，错误情况引起
- 终止，同步，不可恢复，通常是一些硬件错误

