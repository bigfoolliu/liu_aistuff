# mysql数据库使用

<!-- TOC -->

- [mysql数据库使用](#mysql数据库使用)
    - [1.索引](#1索引)
        - [1.1索引类型](#11索引类型)
        - [1.2索引优化](#12索引优化)
        - [1.3索引优点](#13索引优点)
        - [1.4索引使用条件](#14索引使用条件)
    - [2.查询性能优化](#2查询性能优化)
        - [2.1使用Explain分析](#21使用explain分析)
        - [2.2优化数据访问](#22优化数据访问)
        - [2.3重构查询方式](#23重构查询方式)
    - [3.存储引擎](#3存储引擎)
        - [3.1InnoDB](#31innodb)
        - [3.2MyISAM](#32myisam)
    - [4.数据类型](#4数据类型)
        - [4.1整型](#41整型)
        - [4.2浮点数](#42浮点数)
        - [4.3字符串](#43字符串)
        - [4.4时间和日期](#44时间和日期)
    - [5.切分](#5切分)
        - [5.1水平切分](#51水平切分)
        - [5.2垂直切分](#52垂直切分)
    - [6.复制](#6复制)
        - [6.1主从复制](#61主从复制)
        - [6.2读写分离](#62读写分离)

<!-- /TOC -->

- [mysql详细教程](http://c.biancheng.net/view/2409.html)
- [本地mysql读书笔记](../../books/mysql必知必会/mysql_known.md)
- [github中mysql知识点](https://github.com/DavidWhom/CS-Notes-Learning/blob/master/notes/MySQL.md)

## 1.索引

- 基于B+树，节点中key从左到右非递减排序
- 索引是在存储引擎层实现，不同存储引擎具有不同的索引类型和实现。

### 1.1索引类型

1. B+树索引(大多数默认索引)
2. 哈希索引
3. 全文索引
4. 空间数据索引

### 1.2索引优化

1. 独立的列
2. 多列索引
3. 索引列的顺序
4. 前缀索引
5. 覆盖索引

### 1.3索引优点

1. 大大减少服务器需要扫描的行数
2. 帮助服务器避免进行排序和分组,以及避免创建临时表,且将随机I/O变为顺序I/O(因为B+树有序)

### 1.4索引使用条件

1. 对于非常小的表,大部分情况全表扫描比建立索引效果更好
2. `中大型的表使用索引`
3. 特大型的表可以使用`分区技术`

## 2.查询性能优化

### 2.1使用Explain分析

### 2.2优化数据访问

1. 减少请求的数据量
   1. 只返回必要的列和行
   2. 缓存重复查询的数据
2. 减少服务端扫描的行数
   1. 最有效的方式是使用索引来覆盖查询

### 2.3重构查询方式

1. 切分大查询
2. 分解大连接查询

## 3.存储引擎

### 3.1InnoDB

- 默认的事务性存储引擎
- 实现了四个标准的隔离级别：[mysql innodb四个事务隔离级别](https://blog.csdn.net/wangzhiguo9261/article/details/80999492)
  - 可重复读(默认)
  - 提交读
  - 未提交读
  - 串行化
- 支持真正的在线热备份

### 3.2MyISAM

- 提供了大量特性: 压缩表，空间数据索引等
- 不支持事务
- 不支持行级锁

## 4.数据类型

### 4.1整型

### 4.2浮点数

### 4.3字符串

### 4.4时间和日期

## 5.切分

### 5.1水平切分

将同一个表中的记录拆分到多个结构相同的表中。

### 5.2垂直切分

将一个表按列切分为多个表，通常按照列的关系密集程度进行切分。

## 6.复制

### 6.1主从复制

### 6.2读写分离

主服务器处理写操作以及实时性要求高的读操作，从服务器处理读操作。
