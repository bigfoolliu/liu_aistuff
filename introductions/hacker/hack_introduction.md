# hack技术介绍

<!-- vim-markdown-toc Marked -->

* [1.网络安全](#1.网络安全)
    - [1.1SQL注入](#1.1sql注入)
    - [1.2XSS攻击](#1.2xss攻击)
        + [1.2.1反射型xss](#1.2.1反射型xss)
        + [1.2.2存储型xss](#1.2.2存储型xss)
    - [1.3CSRF攻击](#1.3csrf攻击)
    - [1.4DDoS攻击](#1.4ddos攻击)
    - [1.5DNS劫持](#1.5dns劫持)
    - [1.6TCP劫持](#1.6tcp劫持)
    - [1.7端口扫描技术](#1.7端口扫描技术)
* [2.系统安全](#2.系统安全)
    - [2.1栈溢出攻击](#2.1栈溢出攻击)
    - [2.2整数溢出攻击](#2.2整数溢出攻击)
    - [2.3空指针攻击](#2.3空指针攻击)
    - [2.4释放后使用攻击](#2.4释放后使用攻击)
    - [2.5HOOK](#2.5hook)
    - [2.6权限提升](#2.6权限提升)
    - [2.7可信计算](#2.7可信计算)
* [3.密码学](#3.密码学)
    - [3.1对称加密和非对称加密](#3.1对称加密和非对称加密)
    - [3.2密钥交换技术](#3.2密钥交换技术)
    - [3.3信息摘要算法](#3.3信息摘要算法)
    - [3.4数据编码技术](#3.4数据编码技术)
    - [3.5多因子认证技术](#3.5多因子认证技术)

<!-- vim-markdown-toc -->

## 1.网络安全

### 1.1SQL注入

- 核心在于让用户执行攻击者的sql语句，从而直接操作数据库
- 常规套路在于将`SQL语句放置于Form表单或请求参数之中提交到后端服务器`，后端服务器如果未做输入安全校验，直接将变量取出进行数据库查询，则极易中招
- 关注对象：前，web后端工程师

```sh
# 如果是查询人员信息，前端为 GET xx/userinfo?id=1%20or%201=1 
# 后端没有做校验，后端的转化的sql为
select name,[...] from t_user where id=1 or 1=1;

# 就可以获取所有的用户信息
```

### 1.2XSS攻击

- 跨站脚本攻击，将可执行前端脚本植入网页，让用户的浏览器执行其写的js代码
- 种类有：`反射型`，`存储型`
- 防御手段：前后端均需要`做好内容检测，过滤掉可执行脚本的侵入`
- 重点关注：前端工程师、Web后端工程师

#### 1.2.1反射型xss

1. 攻击者将JS代码作为请求参数放置URL中，诱导用户点击示例：`http://localhost:8080/test?name=<script>alert("you are under attack!")</script>`
2. 用户点击后，该JS作为请求参数传给Web服务器后端
3. 后端服务器没有检查过滤，简单处理后放入网页正文中返回给浏览器
4. 浏览器解析返回的网页，中招

#### 1.2.2存储型xss

- 与反射型的区别在于`将攻击脚本入数据库存储`，后端查询时将攻击脚本渲染放入网页，返回给浏览器触发执行

1. 攻击者网页回帖，帖子中包含JS脚本
2. 回帖提交服务器后，存储至数据库
3. 其他网友查看帖子，后台查询该帖子的回帖内容，构建完整网页，返回浏览器
4. 该网友浏览器渲染返回的网页，中招

### 1.3CSRF攻击

- 核心思想在于打开A网站的情况下，另开Tab页面打开恶意网站B，此时在B页面的“唆使”下，浏览器发起一个`对网站A的HTTP请求`
- 重点关注：前端工程师、Web后端工程师

1. 这个HTTP请求不是用户主动意图，可能是一个危害较大的请求操作（转账，删数据）
2. 之前A网站已经打开了，浏览器存有A下发的Cookie或其他用于身份认证的信息，该请求自动带上这些信息，A网站后端分不清楚这是否是用户真实的意愿

### 1.4DDoS攻击

- 分布式拒绝服务攻击，是拒绝服务攻击的升级版
- 拒绝攻击服务顾名思义，`让服务不可用`，常用于攻击对外提供服务的服务器
- 具体分类还有：
  - SYN Flood
  - ICMP Flood
  - UDP Flood
- 防御手段：暂时无100%方法，只能靠一些缓解技术一定层面上减轻攻击，如：`流量清洗`、`SYN Cookie`等等
- 重点关注：运维工程师、安全工程师

### 1.5DNS劫持

- 核心思想在于：请求的可能不是一个真的dns服务器，查询的网址是伪造的
- 攻击手段有：
   - 本地计算机中的木马修改hosts文件
   - 本地计算机中的木马修改DNS数据包中的应答
   - 网络中的节点（如路由器）修改DNS数据包中的应答
   - 网络中的节点（如运营商）修改DNS数据包中的应答
- 防御手段：`DNSSEC`技术，但不能百分百防御；`httpDNS服务`，让DNS变成了在http协议之上的一个应用服务
- 重点关注：安全工程师、后端工程师、运维工程师

### 1.6TCP劫持

- tcp会话劫持，一个TCP连接中的seq和ack后就可以很容易的伪造传输包，假装任意一方与另一方进行通信，我们将这一过程称为TCP会话劫持（TCP Session Hijacking）
- 重点关注：安全工程师、运维工程师

### 1.7端口扫描技术

- 对于基于UDP的服务，发送对应服务的请求包，查看是否有应答
- 对于基于TCP的服务，尝试发起三次握手发送TCP SYN数据包，查看是否有应答
- 如果远程服务器有相应，则说明其运行了对应的服务，在探测出操作系统，运行的程序类型之后，可以根据漏洞针对性攻击
- 防御手段：使用防火墙等安全产品，即时发现和阻断非法的扫描探测行为。
- 重点关注：运维工程师、安全工程师

常见的服务端口如下：

```sh
21  # FTP文件传输服务
25  # SMTP邮件服务
53  # DNS域名解析系统服务
80  # HTTP超文本传输协议服务
135  # RPC远程过程调用服务
443  # HTTPS
339  # MSRDP微软远程桌面连接服务
```

## 2.系统安全

### 2.1栈溢出攻击

- 处理器采用寄存器＋堆栈式的设计，堆栈中既包含了程序运行各个函数栈帧中的变量数据等信息，还保存了函数调用产生的返回地址
- 核心思想：通过一些手段输入到栈中的缓冲区中，冲破缓冲区原有的界限，将存储返回地址的位置覆盖为一个数值，使其指向攻击者提前布置的恶意代码位置，劫持了程序的执行流程
- 防御手段：Linux平台的Stack Canary，Windows平台的GS机制等等
- 重点关注：C／C++工程师

### 2.2整数溢出攻击

- 也是属于溢出类攻击，不一样的是溢出的目标不是栈中的缓冲区，而是一个整数
- 核心思想：整数的溢出, 可以导致可怕的后果，轻则进程崩溃，服务宕机，重则远程代码执行，拿下控制权
- 重点关注：所有程序员

### 2.3空指针攻击

- 一般出现在指针没有初始化，或者使用new进行对象创建/内存分配时失败了，没有检查指针为空而进行访问导致的攻击
- 将导致内存地址访问异常，程序会崩溃退出，造成拒绝服务的现象

### 2.4释放后使用攻击

- 访问一个已经释放后的内存块, 一个释放后的对象没法再访问的, 若delete对象后，没有即时对指针设置为NULL，在后续又继续使用该指针访问对象（比如通过对象的虚函数表指针调用虚函数），将出现内存访问异常
- 防御手段：养成好的编程习惯，对象delete后，指针及时置空
- 重点关注：C／C++工程师

### 2.5HOOK

- 用来改变原有程序执行流程
- 存在`消息HOOK`如获取键盘敲击的事件消息，用得更多的是`程序执行流程层面的HOOK`,意代码被注入目标程序后，在函数入口处添加跳转指令，导致执行到此处的线程转而执行攻击者的代码，实现修改参数、过滤参数的目的
- 重点关注：C／C++工程师

### 2.6权限提升

- 进程／线程拥有一个安全令牌, 目标就是将这个安全令牌更改为高等级的令牌，使其在后续访问敏感资源和执行敏感动作时，凭借该令牌可以通过系统的安全审核
- 重点关注：安全工程师

### 2.7可信计算

- 现有计算机内部再构建一个秘密基地，专门用于运行极度机密的程序。该秘密基地甚至连操作系统都轻易无法访问，更别说操作系统之上的应用程序了。
- 重点关注：终端系统工程师

## 3.密码学

### 3.1对称加密和非对称加密

对称加密：加密密钥和解密密钥一致，特点是加密速度快、加密效率高。常用的对称加密算法有：DES，AES，RC4
常用的非对称加密算法有：RSA，DH，ECC（椭圆曲线加密）

### 3.2密钥交换技术

密钥交换算法

### 3.3信息摘要算法

常用的信息摘要算法有：MD5，SHA1，SHA256

### 3.4数据编码技术

数据编码技术：base64，常用于比特币钱包地址编码的base58。base家族还有base85、base92、base128等

### 3.5多因子认证技术

基于生物特征的认证技术突飞猛进：指纹认证，虹膜认证，人脸识别
几大多因子认证平台：`FIDO`, `IFAA`, `TUSI`
