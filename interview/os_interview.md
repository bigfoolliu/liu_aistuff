# 操作系统面试

<!-- vim-markdown-toc Marked -->

- [操作系统面试](#操作系统面试)
  - [1.进程](#1进程)
  - [2.线程](#2线程)
  - [3.协程](#3协程)
  - [4.内存管理](#4内存管理)
    - [4.1栈](#41栈)
    - [4.2堆](#42堆)
    - [4.3内存抖动](#43内存抖动)
  - [5.磁盘](#5磁盘)
    - [5.1磁盘调度](#51磁盘调度)
  - [常见面试题](#常见面试题)

<!-- vim-markdown-toc -->

## 1.进程

- 进程是一个实体，每一个进程有自己的地址空间（`文本区域(text region)`，`数据区域(data region)`，`堆栈(stack region)`）
  - 文本区域：存储处理器执行的代码
  - 数据区域：存储变量和动态分配的内存
  - 堆栈区域：存储活动过程调用的指令和本地变量
- 进程是一个`执行中的程序`

*进程切换*（或上下文切换）就是`从正在运行的进程中收回处理器，用新的进程塞进处理器，同时切换虚拟内存空间`;
*线程切换*与进程切换的区别就是线程切换不会切换虚拟内存空间。

**进程间通信**：

1. 消息传递（`管道`，`FIFO`，`消息队列(MQ)`）
2. 同步(`互斥量`，`条件变量`，`读写锁`，`文件和写记录锁`，`信号量`)
3. 共享内存(`匿名的`，`具名的`)
4. 远程过程调用(`RPC`)

## 2.线程

- 轻量级线程，程序执行流的最小单位
- 可以并发执行
- 共享进程资源，所有的线程享有所属进程的共同地址空间

## 3.协程

- 微线程，或者用户级线程，是一个执行单元，自带CPU上下文
- 与线程的区别就是`线程是抢占式调用，协程是调度式调用(用户控制)`
- 没有线程的使用多CPU的能力

一个线程中的某个函数，可以在任何地方保存当前函数的一些临时变量等信息，然后切换到另外的一个函数。

## 4.内存管理

### 4.1栈

- 连续的一块内存区域
- 用于存放本地变量，内部临时变量以及与上下文有关的内容
- 机器系统提供，有底层的支持，效率较高

### 4.2堆

- 存放不在栈里的数据，coder控制，容易产生`内存泄漏(Memory Leak)，内存的使用超过分配的最大值`[面试内存泄露问题](https://blog.csdn.net/zy_jibai/article/details/80957169)

### 4.3内存抖动

内存频繁的分配和回收导致卡顿，甚至会发生内存泄漏。

## 5.磁盘

### 5.1磁盘调度

磁盘访问延迟 = 队列时间 + 控制器时间 + `寻道时间(主要耗时)` + 旋转时间 + 传输时间

## 常见面试题
